
<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>API Reference</title>

    <style media="screen">
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight .gh {
  color: #999999;
}
.highlight .sr {
  color: #f6aa11;
}
.highlight .go {
  color: #888888;
}
.highlight .gp {
  color: #555555;
}
.highlight .gs {
}
.highlight .gu {
  color: #aaaaaa;
}
.highlight .nb {
  color: #f6aa11;
}
.highlight .cm {
  color: #75715e;
}
.highlight .cp {
  color: #75715e;
}
.highlight .c1 {
  color: #75715e;
}
.highlight .cs {
  color: #75715e;
}
.highlight .c, .highlight .ch, .highlight .cd, .highlight .cpf {
  color: #75715e;
}
.highlight .err {
  color: #960050;
}
.highlight .gr {
  color: #960050;
}
.highlight .gt {
  color: #960050;
}
.highlight .gd {
  color: #49483e;
}
.highlight .gi {
  color: #49483e;
}
.highlight .ge {
  color: #49483e;
}
.highlight .kc {
  color: #66d9ef;
}
.highlight .kd {
  color: #66d9ef;
}
.highlight .kr {
  color: #66d9ef;
}
.highlight .no {
  color: #66d9ef;
}
.highlight .kt {
  color: #66d9ef;
}
.highlight .mf {
  color: #ae81ff;
}
.highlight .mh {
  color: #ae81ff;
}
.highlight .il {
  color: #ae81ff;
}
.highlight .mi {
  color: #ae81ff;
}
.highlight .mo {
  color: #ae81ff;
}
.highlight .m, .highlight .mb, .highlight .mx {
  color: #ae81ff;
}
.highlight .sc {
  color: #ae81ff;
}
.highlight .se {
  color: #ae81ff;
}
.highlight .ss {
  color: #ae81ff;
}
.highlight .sd {
  color: #e6db74;
}
.highlight .s2 {
  color: #e6db74;
}
.highlight .sb {
  color: #e6db74;
}
.highlight .sh {
  color: #e6db74;
}
.highlight .si {
  color: #e6db74;
}
.highlight .sx {
  color: #e6db74;
}
.highlight .s1 {
  color: #e6db74;
}
.highlight .s, .highlight .sa, .highlight .dl {
  color: #e6db74;
}
.highlight .na {
  color: #a6e22e;
}
.highlight .nc {
  color: #a6e22e;
}
.highlight .nd {
  color: #a6e22e;
}
.highlight .ne {
  color: #a6e22e;
}
.highlight .nf, .highlight .fm {
  color: #a6e22e;
}
.highlight .vc {
  color: #ffffff;
}
.highlight .nn {
  color: #ffffff;
}
.highlight .ni {
  color: #ffffff;
}
.highlight .bp {
  color: #ffffff;
}
.highlight .vg {
  color: #ffffff;
}
.highlight .vi {
  color: #ffffff;
}
.highlight .nv, .highlight .vm {
  color: #ffffff;
}
.highlight .w {
  color: #ffffff;
}
.highlight {
  color: #ffffff;
}
.highlight .n, .highlight .py, .highlight .nx {
  color: #ffffff;
}
.highlight .nl {
  color: #f92672;
}
.highlight .ow {
  color: #f92672;
}
.highlight .nt {
  color: #f92672;
}
.highlight .k, .highlight .kv {
  color: #f92672;
}
.highlight .kn {
  color: #f92672;
}
.highlight .kp {
  color: #f92672;
}
.highlight .o {
  color: #f92672;
}
    </style>
    <style media="print">
      * {
        -webkit-transition:none!important;
        transition:none!important;
      }
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight, .highlight .w {
  color: #586e75;
}
.highlight .err {
  color: #002b36;
  background-color: #dc322f;
}
.highlight .c, .highlight .ch, .highlight .cd, .highlight .cm, .highlight .cpf, .highlight .c1, .highlight .cs {
  color: #657b83;
}
.highlight .cp {
  color: #b58900;
}
.highlight .nt {
  color: #b58900;
}
.highlight .o, .highlight .ow {
  color: #93a1a1;
}
.highlight .p, .highlight .pi {
  color: #93a1a1;
}
.highlight .gi {
  color: #859900;
}
.highlight .gd {
  color: #dc322f;
}
.highlight .gh {
  color: #268bd2;
  background-color: #002b36;
  font-weight: bold;
}
.highlight .k, .highlight .kn, .highlight .kp, .highlight .kr, .highlight .kv {
  color: #6c71c4;
}
.highlight .kc {
  color: #cb4b16;
}
.highlight .kt {
  color: #cb4b16;
}
.highlight .kd {
  color: #cb4b16;
}
.highlight .s, .highlight .sb, .highlight .sc, .highlight .dl, .highlight .sd, .highlight .s2, .highlight .sh, .highlight .sx, .highlight .s1 {
  color: #859900;
}
.highlight .sa {
  color: #6c71c4;
}
.highlight .sr {
  color: #2aa198;
}
.highlight .si {
  color: #d33682;
}
.highlight .se {
  color: #d33682;
}
.highlight .nn {
  color: #b58900;
}
.highlight .nc {
  color: #b58900;
}
.highlight .no {
  color: #b58900;
}
.highlight .na {
  color: #268bd2;
}
.highlight .m, .highlight .mb, .highlight .mf, .highlight .mh, .highlight .mi, .highlight .il, .highlight .mo, .highlight .mx {
  color: #859900;
}
.highlight .ss {
  color: #859900;
}
    </style>
    <link href="stylesheets/screen-c9d8fa83.css" rel="stylesheet" media="screen" />
    <link href="stylesheets/print-953e3353.css" rel="stylesheet" media="print" />
      <script src="javascripts/all-b12a2749.js"></script>

  </head>

  <body class="index" data-languages="[&quot;shell&quot;]">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar-cad8cdcb.png" alt="" />
      </span>
    </a>
    <div class="toc-wrapper">
      <img src="images/logo-945341cb.png" class="logo" alt="" />
        <div class="lang-selector">
              <a href="#" data-language-name="shell">shell</a>
        </div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <ul id="toc" class="toc-list-h1">
          <li>
            <a href="#introduction" class="toc-h1 toc-link" data-title="Introduction">Introduction</a>
          </li>
          <li>
            <a href="#authentication" class="toc-h1 toc-link" data-title="Authentication">Authentication</a>
          </li>
          <li>
            <a href="#permissions" class="toc-h1 toc-link" data-title="Permissions">Permissions</a>
          </li>
          <li>
            <a href="#identifying-companies" class="toc-h1 toc-link" data-title="Identifying companies">Identifying companies</a>
          </li>
          <li>
            <a href="#dynamic-discounting" class="toc-h1 toc-link" data-title="Dynamic discounting">Dynamic discounting</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#add-suppliers" class="toc-h2 toc-link" data-title="Add suppliers">Add suppliers</a>
                  </li>
                  <li>
                    <a href="#retrieve-suppliers" class="toc-h2 toc-link" data-title="Retrieve suppliers">Retrieve suppliers</a>
                  </li>
                  <li>
                    <a href="#add-invoices" class="toc-h2 toc-link" data-title="Add invoices">Add invoices</a>
                  </li>
                  <li>
                    <a href="#retrieve-invoices" class="toc-h2 toc-link" data-title="Retrieve invoices">Retrieve invoices</a>
                  </li>
                  <li>
                    <a href="#delete-invoice" class="toc-h2 toc-link" data-title="Delete invoice">Delete invoice</a>
                  </li>
                  <li>
                    <a href="#create-payment-instruction" class="toc-h2 toc-link" data-title="Create payment instruction">Create payment instruction</a>
                  </li>
                  <li>
                    <a href="#retrieve-payment-instructions" class="toc-h2 toc-link" data-title="Retrieve payment instructions">Retrieve payment instructions</a>
                  </li>
                  <li>
                    <a href="#create-payment-adjustment" class="toc-h2 toc-link" data-title="Create payment adjustment">Create payment adjustment</a>
                  </li>
                  <li>
                    <a href="#retrieve-payment-adjustments" class="toc-h2 toc-link" data-title="Retrieve payment adjustments">Retrieve payment adjustments</a>
                  </li>
                  <li>
                    <a href="#errors" class="toc-h2 toc-link" data-title="Errors">Errors</a>
                  </li>
              </ul>
          </li>
      </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id='introduction'>Introduction</h1>
<p>Welcome to the Novicap early payments API. You can use our API to synchronize suppliers, debtors, and invoices to our platform, and manage their financing.</p>

<p>Please contact <a href="support@novicap.com">support@novicap.com</a> if you have any questions.</p>
<h1 id='authentication'>Authentication</h1>
<blockquote>
<p>To authorize while using the endpoint <code>dynamic_discounting/suppliers</code>, any of these will work:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="s2">"https://api.novicap.com/v1/dynamic_discounting/suppliers"</span> <span class="nt">--data</span> <span class="s1">'{ "api_key": "abcd", "product_id": 123 }'</span>

curl <span class="nt">-H</span> <span class="s2">"Authorization: Bearer abcd"</span> <span class="s2">"https://api.novicap.com/v1/dynamic_discounting/suppliers"</span> <span class="nt">--data</span> <span class="s1">'{ "product_id": 123 }'</span>

curl <span class="nt">-H</span> <span class="s2">"Authorization: Bearer abcd"</span> <span class="s2">"https://api.novicap.com/v1/dynamic_discounting/suppliers?product_id=123"</span>
</code></pre></div>
<blockquote>
<p>where <code>abcd</code> should be replaced with your API key, and <code>123</code> with your product ID. We advise using a JSON payload instead of putting data into the URL, as it is required for more some endpoints that accept things like arrays and objects.</p>
</blockquote>

<p>We use an API key to authenticate which can be found by logging into your account at <a href="https://www.novicap.com">novicap.com</a> and generating it under your user profile. All API hits will be associated with your user and an indefinite audit log is accessible from your account.</p>

<p>The API key should be included in all requests to the server either as a HTTP request parameter named <code>api_key</code> or inside an <code>Authorization: Bearer</code> HTTP request header.</p>

<p>All API requests target a particular product inside your account, such as factoring or dynamic discounting. Each product has an ID which you can find inside the platform near the API key. The product ID should be included in all requests as a HTTP request parameter named <code>product_id</code>.</p>

<p>OAuth 2.0 authentication is available on request. The exact implementation will depend on your authentication provider and workflow.</p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Required</th>
<th>Format</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>api_key</td>
<td>String</td>
<td></td>
<td></td>
<td>Your API key for authentication</td>
</tr>
<tr>
<td>product_id</td>
<td>Number</td>
<td>✓</td>
<td></td>
<td>The ID of the product, visible in the Novicap platform near the API key</td>
</tr>
</tbody></table>
<h1 id='permissions'>Permissions</h1>
<p>Available endpoints depend on the configuration of your account. If you receive a 403 error while trying to access a specific endpoint, please contact support@novicap.com to request access.</p>
<h1 id='identifying-companies'>Identifying companies</h1>
<p>Our system uses a unique ID for each company (supplier or debtor) composed of the <a href="https://en.wikipedia.org/wiki/ISO_3166-1_alpha-2">ISO 2-letter country code</a> and an ID depending on the country. It is required for us to correctly identify the legal entity we&#39;re dealing with.</p>

<p>In the United Kingdom, this is defined as <code>GB</code> and the 8 digit Companies House number. For example, Tesco PLC has a country code of <code>GB</code> and an ID of <code>00445790</code>.</p>

<p>In Spain, this is defined as <code>ES</code> and the CIF code. For example, Mercadona SA has a country code of <code>ES</code> and an ID of <code>A46103834</code>.</p>
<h1 id='dynamic-discounting'>Dynamic discounting</h1><h2 id='add-suppliers'>Add suppliers</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-i</span> <span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span> <span class="nt">-X</span> POST <span class="nt">-i</span> <span class="nt">-d</span> <span class="s1">'{
  "api_key": "abcd",
  "product_id": 123,
  "suppliers": [
    {
      "country_code": "GB",
      "supplier_id": "00445790",
      "supplier_name": "Tesco PLC",
      "contact_first_name": "John",
      "contact_last_name": "Smith",
      "contact_email": "john.smith@company.com",
      "contact_phone": "+44724565898",
      "apr": 10,
      "custom_supplier_data": { "internal_id": "supplier-001", "tags": ["batch 1"] }
    }
  ]
}'</span> <span class="se">\</span>
<span class="s2">"https://api.novicap.com/v1/dynamic_discounting/suppliers"</span>
</code></pre></div>
<blockquote>
<p>The above command returns a empty JSON payload with the 201 CREATED status.</p>
</blockquote>

<p>This endpoint adds suppliers to your dynamic discounting product. You must add suppliers before you add invoices for those suppliers.</p>

<p>The company will receive an onboarding email chain, and we may reach out to the company by phone to assist in onboarding.</p>

<p>If your account has more than one legal entity, you must include a <code>debtor_id</code> along with every supplier, representing the entity which will pay invoices to that supplier.</p>
<h3 id='http-request'>HTTP Request</h3>
<p><code>POST https://api.novicap.com/v1/dynamic_discounting/suppliers</code></p>
<h3 id='parameters'>Parameters</h3>
<blockquote>
<p>The params for this endpoint should match this JSON schema:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"$schema"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://json-schema.org/draft-04/schema"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Schema for POST /v1/dynamic_discounting/suppliers"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"object"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"required"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"product_id"</span><span class="p">,</span><span class="w"> </span><span class="s2">"suppliers"</span><span class="p">],</span><span class="w">
  </span><span class="nl">"properties"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"api_key"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="p">},</span><span class="w">
    </span><span class="nl">"product_id"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"number"</span><span class="p">},</span><span class="w">
    </span><span class="nl">"suppliers"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"array"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"items"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"object"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"required"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"supplier_id"</span><span class="p">,</span><span class="w"> </span><span class="s2">"supplier_name"</span><span class="p">,</span><span class="w"> </span><span class="s2">"contact_email"</span><span class="p">,</span><span class="w"> </span><span class="s2">"apr"</span><span class="p">],</span><span class="w">
        </span><span class="nl">"properties"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"debtor_id"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="p">},</span><span class="w">
          </span><span class="nl">"country_code"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="p">},</span><span class="w">
          </span><span class="nl">"supplier_id"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="p">},</span><span class="w">
          </span><span class="nl">"supplier_name"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="p">},</span><span class="w">
          </span><span class="nl">"contact_first_name"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="p">},</span><span class="w">
          </span><span class="nl">"contact_last_name"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="p">},</span><span class="w">
          </span><span class="nl">"contact_email"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="p">},</span><span class="w">
          </span><span class="nl">"contact_phone"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"string"</span><span class="p">,</span><span class="w"> </span><span class="s2">"number"</span><span class="p">]},</span><span class="w">
          </span><span class="nl">"apr"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"number"</span><span class="p">},</span><span class="w">
          </span><span class="nl">"fixed_fee_percentage"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"number"</span><span class="p">},</span><span class="w">
          </span><span class="nl">"early_payment_cutoff_in_days"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"integer"</span><span class="p">},</span><span class="w">
          </span><span class="nl">"iban"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="p">},</span><span class="w">
          </span><span class="nl">"custom_supplier_data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"object"</span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Required</th>
<th>Format</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>suppliers</td>
<td>Array</td>
<td>✓</td>
<td>Array of <a href="#suppliers">supplier objects</a></td>
<td>A list of suppliers you want to add</td>
</tr>
</tbody></table>
<h3 id='suppliers'>Suppliers</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Required</th>
<th>Format</th>
<th>Default value</th>
<th>Description</th>
<th></th>
</tr>
</thead><tbody>
<tr>
<td>debtor_id</td>
<td>String</td>
<td></td>
<td></td>
<td></td>
<td>If your account contains more than one legal entity, this is the ID of the entity that pays invoices to this supplier</td>
<td></td>
</tr>
<tr>
<td>country_code</td>
<td>String</td>
<td></td>
<td>ISO 3166 alpha-2</td>
<td>ES</td>
<td>The country code of the supplier</td>
<td></td>
</tr>
<tr>
<td>supplier_id</td>
<td>String</td>
<td>✓</td>
<td>Depends on country code</td>
<td></td>
<td>The ID of the supplier (see <a href="#identifying-companies">identifying companies</a>)</td>
<td></td>
</tr>
<tr>
<td>supplier_name</td>
<td>String</td>
<td>✓</td>
<td></td>
<td></td>
<td>The name of the supplier</td>
<td></td>
</tr>
<tr>
<td>contact_first_name</td>
<td>String</td>
<td></td>
<td></td>
<td></td>
<td>The first name of the supplier contact</td>
<td></td>
</tr>
<tr>
<td>contact_last_name</td>
<td>String</td>
<td></td>
<td></td>
<td></td>
<td>The last name of the supplier contact</td>
<td></td>
</tr>
<tr>
<td>contact_email</td>
<td>String</td>
<td>✓</td>
<td></td>
<td></td>
<td>The email of the supplier contact</td>
<td></td>
</tr>
<tr>
<td>contact_phone</td>
<td>String/Number</td>
<td></td>
<td></td>
<td></td>
<td>The full phone number of the supplier contact, including country code</td>
<td></td>
</tr>
<tr>
<td>apr</td>
<td>Number</td>
<td>✓</td>
<td>Percentage points</td>
<td></td>
<td>The APR your want this supplier to pay in percentage points e.g. 10% -&gt; 10</td>
<td></td>
</tr>
<tr>
<td>fixed_fee_percentage</td>
<td>Number</td>
<td></td>
<td>Percentage points</td>
<td>Configured per product</td>
<td>The fixed fee, as a percentage of the face value of the invoice, you want the supplier to pay, in percentage points e.g. 0.5% -&gt; 0.5</td>
<td></td>
</tr>
<tr>
<td>early_payment_cutoff_in_days</td>
<td>Number</td>
<td></td>
<td></td>
<td>10</td>
<td>This number of days before the due date, we stop allowing the supplier to accept financing</td>
<td></td>
</tr>
<tr>
<td>iban</td>
<td>String</td>
<td></td>
<td>IBAN</td>
<td></td>
<td>The IBAN code of the bank account you pay to when making payments to the supplier</td>
<td></td>
</tr>
<tr>
<td>custom_supplier_data</td>
<td>Object</td>
<td></td>
<td>Any valid JSON, maximum of 8192 characters</td>
<td>[]</td>
<td></td>
<td>Any data you want to associate with this supplier</td>
</tr>
</tbody></table>
<h3 id='response'>Response</h3>
<p>A successful response has a 201 Created HTTP status code.</p>
<h2 id='retrieve-suppliers'>Retrieve suppliers</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-i</span> <span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span> <span class="nt">-X</span> GET <span class="nt">-i</span> <span class="nt">-d</span> <span class="s1">'{
  "api_key": "abcd",
  "product_id": 123
}'</span> <span class="se">\</span>
<span class="s2">"https://api.novicap.com/v1/dynamic_discounting/suppliers"</span>
</code></pre></div>
<blockquote>
<p>The above command returns an array of Supplier objects in the JSON payload with the 200 OK status.</p>
</blockquote>

<p>This endpoint returns all the suppliers in your dynamic discounting product.</p>
<h3 id='http-request-2'>HTTP Request</h3>
<p><code>GET https://api.novicap.com/v1/dynamic_discounting/suppliers</code></p>
<h3 id='parameters-2'>Parameters</h3>
<blockquote>
<p>The params for this endpoint should match this JSON schema:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"$schema"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://json-schema.org/draft-04/schema"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Suppliers index endpoint json schema"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"object"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"required"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"product_id"</span><span class="p">],</span><span class="w">
  </span><span class="nl">"properties"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"api_key"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="w"> </span><span class="p">},</span><span class="w">
    </span><span class="nl">"product_id"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"number"</span><span class="w"> </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><h3 id='response-2'>Response</h3>
<p>A successful response has a 200 OK HTTP status code along with an array of supplier objects described above.</p>
<h2 id='add-invoices'>Add invoices</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-i</span> <span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span> <span class="nt">-X</span> POST <span class="nt">-i</span> <span class="nt">-d</span> <span class="s1">'{
  "api_key": "abcd",
  "product_id": 123,
  "invoices": [
    {
      "supplier_id": "00445790",
      "reference": "A1234",
      "amount": 1000,
      "due_at": "2021-10-30",
      "custom_invoice_data": { "internal_id": "inv-001", "tags": ["batch 1"] }
    }
  ]
}'</span> <span class="se">\</span>
<span class="s2">"https://api.novicap.com/v1/dynamic_discounting/invoices"</span>
</code></pre></div>
<blockquote>
<p>The above command returns a empty JSON payload with the 201 CREATED status.</p>
</blockquote>

<p>This endpoint adds invoices to your dynamic discounting product. You must add suppliers before you add invoices for those suppliers.</p>

<p>The company will receive an onboarding email chain, and we may reach out to the company by phone to assist in onboarding.</p>

<p>If your account has more than one legal entity, you must include a <code>debtor_id</code> along with every supplier, representing the entity which will pay invoices to that supplier.</p>

<p>If an invoice already exists under the product with the same supplier and reference, and the invoice is not yet part of a payment instruction, we attempt to update it. If the supplier has already accepted early payment and the update changes the <code>amount</code>, <code>due_at</code>, or <code>invoice_adjustments</code>, we will cancel acceptance and ask the supplier to accept the new terms instead.</p>
<h3 id='http-request'>HTTP Request</h3>
<p><code>POST https://api.novicap.com/v1/dynamic_discounting/invoices</code></p>
<h3 id='parameters'>Parameters</h3>
<blockquote>
<p>The params for this endpoint should match this JSON schema:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Invoices create endpoint json schema"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"object"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"required"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"product_id"</span><span class="p">,</span><span class="w"> </span><span class="s2">"invoices"</span><span class="p">],</span><span class="w">
  </span><span class="nl">"properties"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"api_key"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="w"> </span><span class="p">},</span><span class="w">
    </span><span class="nl">"product_id"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"number"</span><span class="w"> </span><span class="p">},</span><span class="w">
    </span><span class="nl">"invoices"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"type"</span><span class="p">:</span><span class="s2">"array"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"items"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"object"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"required"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"supplier_id"</span><span class="p">,</span><span class="w"> </span><span class="s2">"reference"</span><span class="p">,</span><span class="w"> </span><span class="s2">"amount"</span><span class="p">,</span><span class="w"> </span><span class="s2">"due_at"</span><span class="p">],</span><span class="w">
        </span><span class="nl">"properties"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"debtor_id"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="w"> </span><span class="p">},</span><span class="w">
          </span><span class="nl">"supplier_id"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="w"> </span><span class="p">},</span><span class="w">
          </span><span class="nl">"reference"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="w"> </span><span class="p">},</span><span class="w">
          </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"number"</span><span class="w"> </span><span class="p">},</span><span class="w">
          </span><span class="nl">"due_at"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="w"> </span><span class="p">},</span><span class="w">
          </span><span class="nl">"custom_invoice_data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"object"</span><span class="p">},</span><span class="w">
          </span><span class="nl">"invoice_adjustments"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"array"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"required"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"adjustment_id"</span><span class="p">,</span><span class="w"> </span><span class="s2">"adjustment"</span><span class="p">],</span><span class="w">
            </span><span class="nl">"items"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
              </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"object"</span><span class="p">,</span><span class="w">
              </span><span class="nl">"properties"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"adjustment_id"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="w"> </span><span class="p">},</span><span class="w">
                </span><span class="nl">"adjustment"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"number"</span><span class="w"> </span><span class="p">}</span><span class="w">
              </span><span class="p">}</span><span class="w">
            </span><span class="p">}</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Required</th>
<th>Format</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>invoices</td>
<td>Array</td>
<td>✓</td>
<td>Array of <a href="#invoice-create">invoice objects</a></td>
<td>A list of invoices to create</td>
</tr>
</tbody></table>
<h3 id='invoice-create'>Invoice (create)</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Required</th>
<th>Format</th>
<th>Default value</th>
<th>Description</th>
<th></th>
</tr>
</thead><tbody>
<tr>
<td>debtor_id</td>
<td>String</td>
<td></td>
<td></td>
<td></td>
<td>If your account contains more than one legal entity, this is the ID of the entity that pays invoices to this supplier</td>
<td></td>
</tr>
<tr>
<td>supplier_id</td>
<td>String</td>
<td>✓</td>
<td>Depends on country code</td>
<td></td>
<td>The ID of the supplier (see <a href="#identifying-companies">identifying companies</a>)</td>
<td></td>
</tr>
<tr>
<td>reference</td>
<td>String</td>
<td>✓</td>
<td></td>
<td></td>
<td>The reference of the invoice</td>
<td></td>
</tr>
<tr>
<td>amount</td>
<td>String</td>
<td>✓</td>
<td></td>
<td></td>
<td>The amount of the invoice</td>
<td></td>
</tr>
<tr>
<td>due_at</td>
<td>String</td>
<td>✓</td>
<td>ISO 8601</td>
<td></td>
<td>The date on which the invoice is due</td>
<td></td>
</tr>
<tr>
<td>custom_invoice_data</td>
<td>Object</td>
<td></td>
<td>Any valid JSON, maximum of 8192 characters</td>
<td>{}</td>
<td></td>
<td>Any data you want to associate with this invoice</td>
</tr>
<tr>
<td>invoice_adjustments</td>
<td>Array</td>
<td></td>
<td>Array of <a href="#invoice-adjustment">adjustment objects</a></td>
<td>[]</td>
<td>A list of changes to the invoice amount that should be applied before the discount</td>
<td></td>
</tr>
</tbody></table>
<h3 id='invoice-adjustment'>Invoice adjustment</h3>
<p>You may have pre-existing credit notes that you want to apply to an invoice. These apply before we calculate a discount based on the APR. The supplier will be shown these adjustments inside the platform.</p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Required</th>
<th>Format</th>
<th>Default value</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>adjustment_id</td>
<td>String</td>
<td>✓</td>
<td></td>
<td></td>
<td>A reference which we show to the supplier</td>
</tr>
<tr>
<td>adjustment</td>
<td>Number</td>
<td>✓</td>
<td></td>
<td></td>
<td>The adjustment to the amount of the invoice that you want to make. For a credit note, this should be negative.</td>
</tr>
</tbody></table>
<h3 id='response'>Response</h3>
<p>A successful response has a 201 Created HTTP status code.</p>
<h2 id='retrieve-invoices'>Retrieve invoices</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-i</span> <span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span> <span class="nt">-X</span> GET <span class="nt">-i</span> <span class="nt">-d</span> <span class="s1">'{
  "api_key": "abcd",
  "product_id": 123
}'</span> <span class="se">\</span>
<span class="s2">"https://api.novicap.com/v1/dynamic_discounting/invoices"</span>
</code></pre></div>
<blockquote>
<p>The above command returns an array of Invoice objects in the JSON payload with the 200 OK status.</p>
</blockquote>

<p>This endpoint returns all the invoices registered in your product.</p>
<h3 id='http-request-2'>HTTP Request</h3>
<p><code>GET https://api.novicap.com/v1/dynamic_discounting/invoices</code></p>
<h3 id='parameters-2'>Parameters</h3>
<blockquote>
<p>The params for this endpoint should match this JSON schema:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"$schema"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://json-schema.org/draft-04/schema"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Suppliers index endpoint json schema"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"object"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"required"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"product_id"</span><span class="p">],</span><span class="w">
  </span><span class="nl">"properties"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"api_key"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="w"> </span><span class="p">},</span><span class="w">
    </span><span class="nl">"product_id"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"number"</span><span class="w"> </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><h3 id='response-2'>Response</h3>
<p>A successful response has a 200 OK HTTP status code along with an array of invoice objects.</p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Format</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>invoices</td>
<td>Array</td>
<td>Array of <a href="#invoice-index">invoice objects</a></td>
<td>A list of all invoices in the product</td>
</tr>
</tbody></table>
<h3 id='invoice-index'>Invoice (index)</h3>
<p>Each invoice object has the following schema:</p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Format</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>supplier_id</td>
<td>String</td>
<td>Depends on country</td>
<td>The ID of the supplier (see <a href="#identifying-companies">identifying companies</a>)</td>
</tr>
<tr>
<td>debtor_id</td>
<td>String</td>
<td>Depends on country</td>
<td>The ID of the debtor (see <a href="#identifying-companies">identifying companies</a>)</td>
</tr>
<tr>
<td>reference</td>
<td>String</td>
<td></td>
<td>The reference you gave us - unique for each pair of debtor and supplier</td>
</tr>
<tr>
<td>transaction_id</td>
<td>String</td>
<td></td>
<td>A unique reference for this invoice in our system</td>
</tr>
<tr>
<td>amount</td>
<td>Number</td>
<td></td>
<td>The amount (face value) of the invoice</td>
</tr>
<tr>
<td>discount</td>
<td>Number</td>
<td></td>
<td>The total discount that the supplier agreed to in return for early payment</td>
</tr>
<tr>
<td>facilitator_fee</td>
<td>Number</td>
<td></td>
<td>The amount we will charge you for processing this invoice</td>
</tr>
<tr>
<td>accepted_at</td>
<td>String</td>
<td>ISO 8601</td>
<td>The date the supplier (most recently) accepted early payment of this invoice</td>
</tr>
<tr>
<td>due_at</td>
<td>String</td>
<td>ISO 8601</td>
<td>The date this invoice is due</td>
</tr>
<tr>
<td>management_status</td>
<td>String</td>
<td></td>
<td>An internal invoice status that may help you track how the invoice is doing</td>
</tr>
<tr>
<td>rectified_invoice_url</td>
<td>String</td>
<td>URL</td>
<td>A link to the rectified invoice PDF generated by the supplier. Expires after 1 week.</td>
</tr>
<tr>
<td>payment_instruction_id</td>
<td>String</td>
<td></td>
<td>The payment instruction that this invoice is included in</td>
</tr>
<tr>
<td>custom_invoice_data</td>
<td>Object</td>
<td>Any valid JSON</td>
<td>The custom invoice data you gave us</td>
</tr>
<tr>
<td>custom_supplier_data</td>
<td>Object</td>
<td>Any valid JSON</td>
<td>The custom supplier data you gave us</td>
</tr>
<tr>
<td>invoice_adjustments</td>
<td>Array</td>
<td>Array of <a href="#invoice-adjustment">adjustment objects</a></td>
<td>The pre-discount ajustments you gave us</td>
</tr>
</tbody></table>
<h2 id='delete-invoice'>Delete invoice</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-i</span> <span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span> <span class="nt">-X</span> DELETE <span class="nt">-i</span> <span class="nt">-d</span> <span class="s1">'{
  "api_key": "abcd",
  "product_id": 123
}'</span> <span class="se">\</span>
<span class="s2">"https://api.novicap.com/v1/dynamic_discounting/invoices/DDI-ABCD"</span>
</code></pre></div>
<blockquote>
<p>The above command returns a empty JSON payload with the 200 ACCEPTED status.</p>
</blockquote>

<p>This endpoint permanently deletes the invoice. This cannot be undone.</p>

<p>The URL must contain a valid transaction ID, matching one returned from <a href="#retrieve-invoices">GET /v1/dynamic_discounting/invoices</a>. The transaction ID is not the same as the reference of the invoice submitted by you.</p>

<p>The invoice cannot be deleted if it is already part of a payment instruction. If the supplier has already accepted early payment, we will notify them that the invoice is no longer eligible and that they will not receive it.</p>
<h3 id='http-request-3'>HTTP Request</h3>
<p><code>DELETE https://api.novicap.com/v1/dynamic_discounting/invoices/:transaction_id</code></p>
<h3 id='parameters-3'>Parameters</h3>
<blockquote>
<p>The params for this endpoint should match this JSON schema:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"$schema"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://json-schema.org/draft-04/schema"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Invoices destroy endpoint json schema"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"object"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"required"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"product_id"</span><span class="p">],</span><span class="w">
  </span><span class="nl">"properties"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"api_key"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="w"> </span><span class="p">},</span><span class="w">
    </span><span class="nl">"product_id"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"number"</span><span class="w"> </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><h3 id='response-3'>Response</h3>
<p>A successful response has a 200 OK HTTP status code.</p>
<h2 id='create-payment-instruction'>Create payment instruction</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span> <span class="nt">-X</span> POST <span class="nt">-i</span> <span class="nt">-d</span> <span class="s1">'{
  "api_key": "abcd",
  "product_id": 123
  }'</span> <span class="se">\</span>
<span class="s2">"https://api.novicap.com/v1/dynamic_discounting/payment_instructions"</span>
</code></pre></div>
<blockquote>
<p>The above command returns a JSON payload with the 201 CREATED status.</p>
</blockquote>

<p>This endpoint creates a payment instruction for all the invoices accepted by the supplier which hasn&#39;t been included in an instruction already.</p>

<p>If your account has more than one legal entity, you must include a <code>debtor_id</code>, representing the entity which will pay invoices to suppliers.</p>
<h3 id='http-request'>HTTP Request</h3>
<p><code>POST https://api.novicap.com/v1/dynamic_discounting/payment_instructions</code></p>
<h3 id='parameters'>Parameters</h3>
<blockquote>
<p>The params for this endpoint should match this JSON schema:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"$schema"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://json-schema.org/draft-04/schema"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Payment instructions create endpoint json schema"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"object"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"required"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"product_id"</span><span class="p">],</span><span class="w">
  </span><span class="nl">"properties"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"api_key"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="w"> </span><span class="p">},</span><span class="w">
    </span><span class="nl">"product_id"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"number"</span><span class="w"> </span><span class="p">},</span><span class="w">
    </span><span class="nl">"debtor_id"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="w"> </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Required</th>
<th>Format</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>debtor_id</td>
<td>Number</td>
<td></td>
<td></td>
<td>The ID of the entity, if your account has more then one legal entity</td>
</tr>
</tbody></table>
<h3 id='response'>Response</h3>
<p>A successful response has a 201 Created HTTP status code along with a <a href="#payment-instruction">payment instruction object</a> described below.</p>
<h2 id='retrieve-payment-instructions'>Retrieve payment instructions</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span> <span class="nt">-X</span> GET <span class="nt">-i</span> <span class="nt">-d</span> <span class="s1">'{
-X GET -d '</span><span class="o">{</span>
  <span class="s2">"api_key"</span>: <span class="s2">"abcd"</span>,
  <span class="s2">"product_id"</span>: 123
<span class="o">}</span><span class="s1">' \
"https://api.novicap.com/v1/dynamic_discounting/payment_instructions"
</span></code></pre></div>
<blockquote>
<p>The above command returns a JSON payload with the 200 OK status.</p>
</blockquote>

<p>This endpoint returns all the payments instructions associated with the product.</p>
<h3 id='http-request-2'>HTTP Request</h3>
<p><code>GET https://api.novicap.com/v1/dynamic_discounting/payment_instructions</code></p>
<h3 id='parameters-2'>Parameters</h3>
<blockquote>
<p>The params for this endpoint should match this JSON schema:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"$schema"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://json-schema.org/draft-04/schema"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Payment instructions index endpoint json schema"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"object"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"required"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"product_id"</span><span class="p">],</span><span class="w">
  </span><span class="nl">"properties"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"api_key"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="w"> </span><span class="p">},</span><span class="w">
    </span><span class="nl">"product_id"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"number"</span><span class="w"> </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><h3 id='payment-instructions'>Payment instructions</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Format</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>payment_instructions</td>
<td>Array</td>
<td>Array of <a href="#payment-instruction">payment instruction objects</a></td>
<td>List of payment instructions in your account</td>
</tr>
</tbody></table>
<h3 id='payment-instruction'>Payment instruction</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Format</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>payment_instruction_id</td>
<td>String</td>
<td></td>
<td>A unique ID for this payment instruction</td>
</tr>
<tr>
<td>invoices</td>
<td>Array</td>
<td>Array of <a href="#invoice-index">invoice objects</a></td>
<td>A list of invoices associated with this payment instruction</td>
</tr>
<tr>
<td>payments</td>
<td>Array</td>
<td>Array of <a href="#payment">payment objects</a></td>
<td>A list of payments to make, one per supplier</td>
</tr>
</tbody></table>
<h3 id='payment'>Payment</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Format</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>supplier_name</td>
<td>String</td>
<td></td>
<td>Name of the supplier to pay</td>
</tr>
<tr>
<td>supplier_id</td>
<td>String</td>
<td>Depends on country code</td>
<td>The ID of the supplier to pay (see <a href="#identifying-companies">identifying companies</a>)</td>
</tr>
<tr>
<td>debtor_name</td>
<td>String</td>
<td></td>
<td>Name of the legal entity that should make the payment, which matters if you have more than one in your account</td>
</tr>
<tr>
<td>debtor_id</td>
<td>String</td>
<td>Depends on country code</td>
<td>The ID of the legal entity that should make the payment (see <a href="#identifying-companies">identifying companies</a>)</td>
</tr>
<tr>
<td>amount</td>
<td>Number</td>
<td></td>
<td>The amount you should pay the supplier</td>
</tr>
<tr>
<td>iban</td>
<td>String</td>
<td>IBAN</td>
<td>The bank account you should pay into (if you give it to us)</td>
</tr>
<tr>
<td>references</td>
<td>String</td>
<td>Seperated by &#39;, &#39; (comma then space)</td>
<td>A list of invoice references included in this payment</td>
</tr>
</tbody></table>
<h3 id='response-2'>Response</h3>
<p>A successful response has a 200 OK HTTP status code along with the list of <a href="!payment-instruction">payment instructions</a> and the included invoices.</p>
<h2 id='create-payment-adjustment'>Create payment adjustment</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span> <span class="nt">-X</span> POST <span class="nt">-i</span> <span class="nt">-d</span> <span class="s1">'{
  "api_key": "abcd",
  "product_id": 123,
  "payment_adjustments": [
    {
      "supplier_id": "00445790",
      "reference": "ADJ-001",
      "amount": -100
    }
  ]
}'</span> <span class="se">\</span>
<span class="s2">"https://api.novicap.com/v1/dynamic_discounting/payment_adjustments"</span>
</code></pre></div>
<blockquote>
<p>The above command returns a JSON payload with the 201 CREATED status.</p>
</blockquote>

<p>This endpoint creates an adjustment to the next payment to a supplier. It can be used to collect outstanding credit notes from the next payment you make, instead of attaching adjustments to individual invoices using <a href="#invoice-adjustment">invoice adjustments</a>.</p>

<p>If your account has more than one legal entity, you must include a <code>debtor_id</code>. The next time that entity (but not others) creates a payment instruction to the given supplier, the payment adjustment will be applied.</p>
<h3 id='http-request'>HTTP Request</h3>
<p><code>POST https://api.novicap.com/v1/dynamic_discounting/payment_adjustments</code></p>
<h3 id='parameters'>Parameters</h3>
<blockquote>
<p>The params for this endpoint should match this JSON schema:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"$schema"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://json-schema.org/draft-04/schema"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Payment adjustment create endpoint json schema"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"object"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"required"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"product_id"</span><span class="p">,</span><span class="w"> </span><span class="s2">"payment_adjustments"</span><span class="p">],</span><span class="w">
  </span><span class="nl">"properties"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"api_key"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="w"> </span><span class="p">},</span><span class="w">
    </span><span class="nl">"product_id"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"number"</span><span class="w"> </span><span class="p">},</span><span class="w">
    </span><span class="nl">"payment_adjustments"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"array"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"items"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"object"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"required"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"supplier_id"</span><span class="p">,</span><span class="w"> </span><span class="s2">"reference"</span><span class="p">,</span><span class="w"> </span><span class="s2">"amount"</span><span class="p">],</span><span class="w">
        </span><span class="nl">"properties"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"debtor_id"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="w"> </span><span class="p">},</span><span class="w">
          </span><span class="nl">"supplier_id"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="w"> </span><span class="p">},</span><span class="w">
          </span><span class="nl">"reference"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="w"> </span><span class="p">},</span><span class="w">
          </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"number"</span><span class="w"> </span><span class="p">},</span><span class="w">
          </span><span class="nl">"custom_payment_adjustment_data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"object"</span><span class="w"> </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Required</th>
<th>Format</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>payment_adjustments</td>
<td>Array</td>
<td>✓</td>
<td>Array of <a href="#payment-adjustment-create">payment adjustment objects</a></td>
<td>The payment adjustments you want to add or update</td>
</tr>
</tbody></table>
<h3 id='payment-adjustment-create'> Payment adjustment (create)</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Required</th>
<th>Format</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>debtor_id</td>
<td>String</td>
<td></td>
<td></td>
<td>If your account contains more than one legal entity, this is the ID of the entity that has the payment adjustment</td>
</tr>
<tr>
<td>supplier_id</td>
<td>String</td>
<td>✓</td>
<td>Depends on country code</td>
<td>The ID of the supplier (see <a href="#identifying-companies">identifying companies</a>)</td>
</tr>
<tr>
<td>reference</td>
<td>String</td>
<td>✓</td>
<td></td>
<td>The reference of the payment adjustment that will be shown to the supplier</td>
</tr>
<tr>
<td>amount</td>
<td>Number</td>
<td>✓</td>
<td></td>
<td>The amount of the payment adjustment. For credit notes, this should be negative.</td>
</tr>
<tr>
<td>custom_payment_adjustment_data</td>
<td>Object</td>
<td></td>
<td>Any valid JSON, maximum of 8192 characters</td>
<td>Any data you want to associate with this payment adjustment</td>
</tr>
</tbody></table>
<h3 id='response'>Response</h3>
<p>A successful response has a 201 Created HTTP status code.</p>
<h2 id='retrieve-payment-adjustments'>Retrieve payment adjustments</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span> <span class="nt">-X</span> GET <span class="nt">-i</span> <span class="nt">-d</span> <span class="s1">'{
-X GET -d '</span><span class="o">{</span>
  <span class="s2">"api_key"</span>: <span class="s2">"abcd"</span>,
  <span class="s2">"product_id"</span>: 123
<span class="o">}</span><span class="s1">' \
"https://api.novicap.com/v1/dynamic_discounting/payment_adjustments"
</span></code></pre></div>
<blockquote>
<p>The above command returns a JSON payload with the 200 OK status.</p>
</blockquote>

<p>This endpoint returns all the payments adjustments associated with the product.</p>
<h3 id='http-request-2'>HTTP Request</h3>
<p><code>GET https://api.novicap.com/v1/dynamic_discounting/payment_adjustments</code></p>
<h3 id='parameters-2'>Parameters</h3>
<blockquote>
<p>The params for this endpoint should match this JSON schema:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"$schema"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://json-schema.org/draft-04/schema"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Payment adjustments index endpoint json schema"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"object"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"required"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"product_id"</span><span class="p">],</span><span class="w">
  </span><span class="nl">"properties"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"api_key"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="w"> </span><span class="p">},</span><span class="w">
    </span><span class="nl">"product_id"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"number"</span><span class="w"> </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><h3 id='response-2'>Response</h3>
<p>A successful response has a 200 OK HTTP status code along with the list of payment instructions and the included invoices.</p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Format</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>payment_adjustments</td>
<td>Array</td>
<td>Array of <a href="#payment-adjustment-index">payment adjustment objects</a></td>
<td>List of payment adjustments in your account</td>
</tr>
</tbody></table>
<h3 id='payment-adjustment-index'>Payment adjustment (index)</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>debtor_id</td>
<td>String</td>
<td>If your account contains more than one legal entity, this is the ID of the entity that has the payment adjustment</td>
</tr>
<tr>
<td>supplier_id</td>
<td>String</td>
<td>The ID of the supplier (see <a href="#identifying-companies">identifying companies</a>)</td>
</tr>
<tr>
<td>reference</td>
<td>String</td>
<td>The reference of the payment adjustment that is shown to the supplier</td>
</tr>
<tr>
<td>amount</td>
<td>Number</td>
<td>The amount of the payment adjustment. For credit notes, this should be negative.</td>
</tr>
<tr>
<td>custom_payment_adjustment_data</td>
<td>Object</td>
<td>Any data you gave us to associate with this payment adjustment</td>
</tr>
<tr>
<td>payment_instruction_id</td>
<td>String</td>
<td>The ID of the payment instruction that this adjustment was applied to, if it has been applied</td>
</tr>
</tbody></table>
<h2 id='errors'>Errors</h2>
<p>Any HTTP request may fail with one of the following errors.</p>

<table><thead>
<tr>
<th>Error Code</th>
<th>Meaning</th>
</tr>
</thead><tbody>
<tr>
<td>400</td>
<td>Bad Request -- The formatting of the request is not correct</td>
</tr>
<tr>
<td>401</td>
<td>Unauthorized -- Your API key is not recognised</td>
</tr>
<tr>
<td>403</td>
<td>Forbidden -- Your API key is recognised and the URL is correct, but you do not have permission to perform that action</td>
</tr>
<tr>
<td>404</td>
<td>Not Found -- The URL is not correct</td>
</tr>
<tr>
<td>500</td>
<td>Internal Server Error -- We had an unexpected problem on our side - contact support or try again later</td>
</tr>
<tr>
<td>502</td>
<td>Bad Gateway -- Something went wrong between you and our servers - contact support or try again later</td>
</tr>
<tr>
<td>503</td>
<td>Service Unavailable -- We&#39;re under unusually high load and can&#39;t respond to that request at the moment - contact support or try again later</td>
</tr>
<tr>
<td>504</td>
<td>Gateway Timeout -- We&#39;re under unusually high load and can&#39;t respond to that request at the moment - contact support or try again later</td>
</tr>
</tbody></table>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="shell">shell</a>
          </div>
      </div>
    </div>
  </body>
</html>
